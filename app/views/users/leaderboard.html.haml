#modal-container.hide
%h3.pull-left
  = @current_tournament.name
  Leaderboard
= link_to 'Back to Home', home_path, :class => 'pull-right', :style => 'margin-top:20px;'
%div{:style => 'clear:both;'}

%table.table.table-striped#users
  %thead
    %tr
      %th.middle{:rowspan => 2} S.No
      %th.middle{:rowspan => 2} Name
      %th.middle{:rowspan => 2} Location
      %th.center{:colspan => 2} Matches Count
      %th.middle.center{:rowspan => 2} Total Points
      %th.middle.center{:rowspan => 2} Position
    %tr
      %th.center Predicted
      %th.center Completed

  %tbody
    - position, last_points = 0, -1
    -  @current_tournament.leaderboard_users.all.each_with_index do |u, i|
      - me = u.id == current_user.id
      - position += 1 unless last_points == u.total_points.to_i
      %tr{:style => me ? 'border:2px solid green' : ''}
        %td= i + 1
        %td
          = link_to u.fullname, statistics_matches_path(:tournament_id => @current_tournament.id, :user_id => u.id), :remote => true, :title => 'View My Results'
        %td= u.location
        %td.center= u.matches_predicted
        %td.center= @current_tournament.completed_matches_count
        %td.center= u.total_points.to_i
        %td.center= position
        - last_points = u.total_points.to_i

= link_to "Back", home_path
